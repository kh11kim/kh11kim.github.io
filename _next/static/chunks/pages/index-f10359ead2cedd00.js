(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(2939)}])},2939:function(e,t,n){"use strict";let a;n.r(t),n.d(t,{default:function(){return T}});var r=n(5893),o=n(7294),l=n(1163),s=n(6154),i=n(9367),u=n(1142),c=n.n(u),f=JSON.parse('{"P_":"http://localhost:8000/upload","Om":"ws://localhost:8000/event","H5":"http://localhost:8000/ping"}'),p=n(5885);f.H5;let d=f.Om,m=f.P_,g="token",x=new p.Z,_={},h=()=>{let e=new Date().getTime(),t=performance&&performance.now&&1e3*performance.now()||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,n=>{let a=16*Math.random();return e>0?(a=(e+a)%16|0,e=Math.floor(e/16)):(a=(t+a)%16|0,t=Math.floor(t/16)),("x"==n?a:7&a|8).toString(16)})},v=()=>(a||window&&(window.sessionStorage.getItem(g)||window.sessionStorage.setItem(g,h()),a=window.sessionStorage.getItem(g)),a),y=(e,t)=>{for(let n in t){let a=e,r=n.split(".").slice(1);for(;r.length>0;)a=a[r.shift()];for(let e in t[n])a[e]=t[n][e]}},w=async(e,t,n)=>{if("_redirect"==e.name)return t.push(e.payload.path),!1;if("_console"==e.name)return console.log(e.payload.message),!1;if("_set_cookie"==e.name)return x.set(e.payload.key,e.payload.value),!1;if("_remove_cookie"==e.name)return x.remove(e.payload.key,e.payload.options),!1;if("_set_local_storage"==e.name)return localStorage.setItem(e.payload.key,e.payload.value),!1;if("_clear_local_storage"==e.name)return localStorage.clear(),!1;if("_remove_local_storage"==e.name)return localStorage.removeItem(e.payload.key),!1;if("_set_clipboard"==e.name){let t=e.payload.content;return navigator.clipboard.writeText(t),!1}if("_alert"==e.name)return alert(e.payload.message),!1;if("_set_focus"==e.name){let t=e.payload.ref in _?_[e.payload.ref]:e.payload.ref;return t.current.focus(),!1}if("_set_value"==e.name){let t=e.payload.ref in _?_[e.payload.ref]:e.payload.ref;return t.current.value=e.payload.value,!1}return e.token=v(),e.router_data=(e=>{let{pathname:t,query:n}=e;return{pathname:t,query:n}})(t),!!n&&(n.emit("event",JSON.stringify(e)),!0)},k=async(e,t,n)=>{let a=!1;return"uploadFiles"==e.handler&&(a=await E(t,n,e.name)),a},S=async(e,t,n,a,r,o)=>{if(n.processing||0==e.events.length)return;a({...n,processing:!0});let l=e.events.shift();t(t=>({...t,events:e.events}));(l.handler?await k(l,e,a):await w(l,r,o))||a({...n,final:!0,processing:!1})},j=async(e,t,n,a,r,o,l,s)=>{let u=new URL(d);e.current=(0,i.ZP)(d,{path:u.pathname,transports:l,autoUnref:!1}),e.current.on("connect",()=>{S(t,n,a,r,o,e.current),s(!1)}),e.current.on("connect_error",e=>{s(!0)}),e.current.on("event",e=>{y(t,(e=c().parse(e)).delta),r(n=>({state:t,events:[...n.events,...e.events],final:e.final,processing:!0}))})},E=async(e,t,n)=>{let a=e.files;if(0==a.length)return!1;let r={"Content-Type":a[0].type},o=new FormData;for(let e=0;e<a.length;e++)o.append("files",a[e],v()+":"+n+":"+a[e].name);await s.Z.post(m,o,r).then(()=>!0).catch(e=>(e.response?console.log(e.response.data):e.request?console.log(e.request):console.log(e.message),!1))},C=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{name:e,payload:t,handler:n}},N=e=>{e&&"submit"==e.type&&e.preventDefault()};n(5202);var b=n(2498),I=n(7754),O=n(3100),R=n(9008),P=n.n(R);function T(){let[e,t]=(0,o.useState)({events:[{name:"default_state.hydrate"}],files:[]}),[n,a]=(0,o.useState)({state:null,events:[],final:!0,processing:!1}),[s,i]=(0,o.useState)(!1),u=(0,l.useRouter)(),c=(0,o.useRef)(null),{isReady:f}=u,{colorMode:p,toggleColorMode:d}=(0,b.If)(),m=(0,o.useRef)(),g=(e,n)=>{N(n),t(t=>({...t,events:[...t.events,...e]}))};return(0,o.useEffect)(()=>{f&&(c.current||j(c,e,t,n,a,u,["websocket","polling"],i),n.processing||S(e,t,n,a,u,c.current),null!=n.state&&(t(e=>({...n.state,events:[...e.events,...n.events]})),a(e=>({state:null,events:[],final:!0,processing:!e.final})),S(e,t,n,a,u,c.current)))}),(0,o.useEffect)(()=>{m.current&&m.current.focus()}),(0,o.useEffect)(()=>{let e=()=>g([C("default_state.hydrate",{})]);return u.events.on("routeChangeComplete",e),()=>{u.events.off("routeChangeComplete",e)}},[u]),(0,r.jsx)(o.Fragment,{children:(0,r.jsxs)(o.Fragment,{children:[(0,r.jsx)(I.M,{children:(0,r.jsx)(O.xu,{children:"hello world"})}),(0,r.jsxs)(P(),{children:[(0,r.jsx)("title",{children:"Reflex App"}),(0,r.jsx)("meta",{content:"A Reflex app.",name:"description"}),(0,r.jsx)("meta",{content:"favicon.ico",property:"og:image"})]})]})})}}},function(e){e.O(0,[142,774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);